{"ast":null,"code":"var _jsxFileName = \"/home/frangb/Documentos/xolos/practicas/src/components/Template/TypeAhead.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport useDebounce from \"../../services/debounceService\";\nimport filtrarArreglo from \"../../services/filterService\";\nimport CampoCorrecto from \"./CampoCorrecto\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TypeAhead = ({\n  display,\n  onSelect,\n  opciones,\n  propBuscada,\n  alias,\n  correcto,\n  placeholder = ''\n}) => {\n  _s();\n\n  //|------State-------|//\n  const [buscador_previo, setBuscadorPrevio] = useState('');\n  const buscador = useDebounce(buscador_previo, 0);\n  const [filtrado, setFiltrado] = useState([]);\n  const [cont, setCont] = useState(0); //|------Actions------|//\n\n  const handleChange = value => {\n    onSelect({\n      [propBuscada]: value\n    });\n    let keys = propBuscada.split(\".\");\n    let obj = value;\n    let aux = {};\n\n    for (let i = keys.length - 1; i >= 0; i--) {\n      aux[keys[i]] = obj;\n      obj = Object.assign({}, aux);\n      aux = {};\n    }\n\n    setBuscadorPrevio(Object.assign({}, buscador_previo, obj));\n  };\n\n  useEffect(() => {\n    if (buscador) {\n      let nuevo_array = opciones !== null ? filtrarArreglo(opciones, buscador) : [];\n      setFiltrado(nuevo_array);\n    }\n  }, [buscador]);\n\n  const selecciona = e => {\n    onSelect(e);\n    setFiltrado([]);\n  };\n\n  const validaProp = () => {\n    setTimeout(() => {\n      setFiltrado([]);\n      setCont(0);\n    }, 1000);\n  };\n\n  const validaKeyboard = e => {\n    if (e.keyCode === 40) {\n      if (cont < filtrado.length - 1) {\n        setCont(cont + 1);\n      } else {\n        setCont(filtrado.length - 1);\n      }\n    } else if (e.keyCode === 38) {\n      if (cont !== 0) {\n        setCont(cont - 1);\n      }\n    }\n\n    if (e.key === 'Enter') {\n      if (filtrado.length > 0) {\n        onSelect(filtrado[cont]);\n        setFiltrado([]);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-100 \",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: placeholder,\n        onKeyDown: e => validaKeyboard(e),\n        value: getValor(display, propBuscada),\n        onBlur: () => validaProp(),\n        className: \"form-control-sm form-control\",\n        onChange: e => handleChange(e.target.value)\n      }, alias, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(CampoCorrecto, {\n          coreccto: correcto\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), filtrado.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"position-absolute card-body border border-dark bg-white\",\n      style: {\n        zIndex: 1\n      },\n      children: filtrado.map((cat, index) => /*#__PURE__*/_jsxDEV(ItemList, {\n        cat: cat,\n        cont: cont,\n        index: index,\n        propBuscada: propBuscada,\n        seleccionar: selecciona\n      }, `il-${alias}>-${index}`, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n};\n\n_s(TypeAhead, \"GINfrzNTe0pTpfH/WCfsZF5J72I=\", false, function () {\n  return [useDebounce];\n});\n\n_c = TypeAhead;\n\nconst ItemList = ({\n  cat,\n  seleccionar,\n  cont,\n  index,\n  propBuscada\n}) => {\n  const seleccionarItem = () => {\n    seleccionar(cat);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `${cont === index ? ' blue lighten-4' : ''}  cursor condensed `,\n    onClick: () => seleccionarItem(),\n    children: getValor(cat, propBuscada)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 9\n  }, this);\n};\n\n_c2 = ItemList;\n\nconst getValor = (obj, buscado) => {\n  let propiedades = buscado.split(\".\");\n  let valor = '';\n  let obj_buscado = obj;\n\n  if (typeof obj_buscado !== \"undefined\" && obj_buscado !== null) {\n    propiedades.forEach((prop, index) => {\n      if (typeof obj_buscado[prop] !== 'undefined' && obj_buscado[prop] !== null) {\n        obj_buscado = obj_buscado[prop];\n        if (index == propiedades.length - 1) valor = obj_buscado;\n      }\n    });\n  }\n\n  return valor;\n};\n\nexport default TypeAhead;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"TypeAhead\");\n$RefreshReg$(_c2, \"ItemList\");","map":{"version":3,"sources":["/home/frangb/Documentos/xolos/practicas/src/components/Template/TypeAhead.js"],"names":["React","useEffect","useState","useDebounce","filtrarArreglo","CampoCorrecto","TypeAhead","display","onSelect","opciones","propBuscada","alias","correcto","placeholder","buscador_previo","setBuscadorPrevio","buscador","filtrado","setFiltrado","cont","setCont","handleChange","value","keys","split","obj","aux","i","length","Object","assign","nuevo_array","selecciona","e","validaProp","setTimeout","validaKeyboard","keyCode","key","getValor","target","zIndex","map","cat","index","ItemList","seleccionar","seleccionarItem","buscado","propiedades","valor","obj_buscado","forEach","prop"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport useDebounce from \"../../services/debounceService\";\nimport filtrarArreglo from \"../../services/filterService\";\nimport CampoCorrecto from \"./CampoCorrecto\";\n\nconst TypeAhead = ({display, onSelect, opciones, propBuscada, alias, correcto, placeholder = ''}) => {\n\n    //|------State-------|//\n    const [buscador_previo, setBuscadorPrevio] = useState('');\n    const buscador = useDebounce(buscador_previo, 0);\n    const [filtrado, setFiltrado] = useState([]);\n    const [cont, setCont] = useState(0);\n\n//|------Actions------|//\n    const handleChange = (value) => {\n        onSelect({[propBuscada]: value});\n        let keys = propBuscada.split(\".\");\n        let obj = value;\n        let aux = {};\n        for (let i = keys.length - 1; i >= 0; i--) {\n            aux[keys[i]] = obj;\n            obj = Object.assign({}, aux);\n            aux = {};\n        }\n        setBuscadorPrevio(Object.assign({}, buscador_previo, obj));\n    };\n\n    useEffect(() => {\n        if (buscador) {\n            let nuevo_array = opciones !== null ? filtrarArreglo(opciones, buscador) : [];\n            setFiltrado(nuevo_array);\n        }\n    }, [buscador]);\n\n    const selecciona = (e) => {\n        onSelect(e);\n        setFiltrado([])\n    };\n\n    const validaProp = () => {\n        setTimeout(() => {\n            setFiltrado([]);\n            setCont(0);\n        }, 1000)\n    };\n\n    const validaKeyboard = (e) => {\n        if (e.keyCode === 40) {\n            if (cont < filtrado.length - 1) {\n                setCont(cont + 1);\n            } else {\n                setCont(filtrado.length - 1);\n            }\n\n        } else if (e.keyCode === 38) {\n            if (cont !== 0) {\n                setCont(cont - 1);\n            }\n        }\n\n        if (e.key === 'Enter') {\n            if(filtrado.length > 0){\n                onSelect(filtrado[cont]);\n                setFiltrado([]);\n            }\n        }\n\n\n    };\n\n    return (\n        <div className=\"w-100 \">\n            <div className=\"d-flex justify-content-between\">\n                <input type=\"text\"\n                       key={alias}\n                       placeholder={placeholder}\n                       onKeyDown={(e) => validaKeyboard(e)}\n                       value={getValor(display, propBuscada)}\n                       onBlur={() => validaProp()}\n                       className=\"form-control-sm form-control\"\n                       onChange={(e) => handleChange(e.target.value)}/>\n                <div>\n                    <CampoCorrecto\n                        coreccto={correcto}/>\n                </div>\n            </div>\n            {filtrado.length > 0 &&\n            <div className=\"position-absolute card-body border border-dark bg-white\" style={{zIndex: 1}}>\n                {\n                    filtrado.map((cat, index) =>\n                        <ItemList\n                            key={`il-${alias}>-${index}`}\n                            cat={cat}\n                            cont={cont}\n                            index={index}\n                            propBuscada={propBuscada}\n                            seleccionar={selecciona}/>\n                    )\n                }\n            </div>\n            }\n\n\n        </div>\n    );\n};\n\n\nconst ItemList = ({cat, seleccionar, cont, index, propBuscada}) => {\n    const seleccionarItem = () => {\n        seleccionar(cat);\n    };\n\n    return (\n        <div className={`${cont === index ? ' blue lighten-4' : ''}  cursor condensed `}\n             onClick={() => seleccionarItem()}>\n            {getValor(cat, propBuscada)}\n        </div>\n    );\n};\n\n\n\nconst getValor = (obj, buscado) => {\n    let propiedades = buscado.split(\".\");\n    let valor = '';\n    let obj_buscado = obj;\n    if (typeof obj_buscado !== \"undefined\" && obj_buscado !== null) {\n        propiedades.forEach((prop, index) => {\n            if (typeof obj_buscado[prop] !== 'undefined' && obj_buscado[prop] !== null) {\n                obj_buscado = obj_buscado[prop];\n                if (index == propiedades.length - 1)\n                    valor = obj_buscado;\n            }\n        });\n    }\n    return valor;\n}\nexport default TypeAhead;"]},"metadata":{},"sourceType":"module"}