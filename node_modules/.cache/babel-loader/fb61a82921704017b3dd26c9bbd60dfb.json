{"ast":null,"code":"var _jsxFileName = \"/home/frangb/Documentos/xolos/practicas/src/components/Template/ModalLogin.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { FaLock, FaUser } from 'react-icons/fa';\nimport { attemp, creaSesion, loginTrabajador } from \"../../services/authService\";\nimport { useTranslation } from \"react-i18next\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ModalLogin = ({\n  ver_modal,\n  setVerModalCh,\n  setPermisosOk\n}) => {\n  _s();\n\n  //|------State------|//\n  const [t] = useTranslation(['navbar']);\n  const [username, setUsername] = useState('');\n  const [username_input, setUsernameInput] = useState(null);\n  const [password, setPassword] = useState('');\n  const [password2, setPassword2] = useState('');\n  const [single_or_multi, setSingleOrMulti] = useState('');\n  const [trabajadores, setTrabajadores] = useState([]);\n  const [requiere_segundo_paso, setRequiereSegundoPaso] = useState(false);\n  const [trabajador_login, setTrabajadorLogin] = useState({}); //|-------Actions-------|//\n\n  const attempLogin = () => {\n    if (username && password) {\n      attemp(username, password).then(data => {\n        setSingleOrMulti(data.singleOrMulti);\n\n        if (data.singleOrMulti === 'single') {\n          creaSesion(data.token); // setPermisosOk(true);\n          //setPermisosOk(false);\n          //setVerModalCh(false);\n        } else {\n          setTrabajadores(data.trabajadores);\n          setRequiereSegundoPaso(data.requiere_segundo_paso);\n        }\n      });\n    }\n  };\n\n  const loginTrabajadorSeleccionado = () => {\n    loginTrabajador(username, trabajador_login.id, password2).then(data => {\n      creaSesion(data.token); // setPermisosOk(true);\n      //setPermisosOk(false);\n      //setVerModalCh(false);\n    });\n  };\n\n  const handleKeyUp = e => {\n    if (e.key === 'Enter') {\n      attempLogin();\n    }\n  };\n\n  const onEnteredHandle = () => {\n    username_input.focus();\n  };\n\n  const setRef = r => setUsernameInput(r); //|------Render-------|//\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal fade\",\n    id: \"modalLogin\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"modal-title text-center\",\n            children: [/*#__PURE__*/_jsxDEV(FaLock, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 29\n            }, this), t('iniciarSesion')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"close\",\n            \"data-dismiss\": \"modal\",\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex flex-column py-1\",\n            children: [single_or_multi != 'multi' && /*#__PURE__*/_jsxDEV(Credenciales, {\n              t: t,\n              setUsername: setUsername,\n              setPassword: setPassword,\n              handleKeyUp: handleKeyUp,\n              setRef: setRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 29\n            }, this), single_or_multi && single_or_multi == 'multi' && /*#__PURE__*/_jsxDEV(SegundoPaso, {\n              t: t,\n              trabajadores: trabajadores,\n              setPassword2: setPassword2,\n              setTrabajadorLogin: setTrabajadorLogin,\n              requiere_segundo_paso: requiere_segundo_paso\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {\n          t: t,\n          attempLogin: attempLogin,\n          single_or_multi: single_or_multi,\n          loginTrabajadorSeleccionado: loginTrabajadorSeleccionado\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}; //|------SubCompoenntes------|//\n\n_s(ModalLogin, \"0my1j5XjPjIREG3tecKXhpupmHg=\", false, function () {\n  return [useTranslation];\n});\n\n_c = ModalLogin;\n\nconst Credenciales = ({\n  t,\n  setUsername,\n  setPassword,\n  handleKeyUp,\n  setRef\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: t('insIniciarSesion')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form-control form-control-sm text-center mt-2\",\n        id: \"username\",\n        onKeyUp: handleKeyUp,\n        autoFocus: true,\n        ref: setRef,\n        onChange: e => setUsername(e.target.value),\n        placeholder: t('username')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: \"form-control form-control-sm text-center mt-2\",\n        onKeyUp: handleKeyUp,\n        onChange: e => setPassword(e.target.value),\n        placeholder: t('password')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 9\n  }, this);\n};\n\n_c2 = Credenciales;\n\nconst SegundoPaso = ({\n  t,\n  trabajadores,\n  requiere_segundo_paso,\n  setTrabajadorLogin,\n  setPassword2\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column px-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-success\",\n      children: t('insIniciarSesionTrab')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n      className: \"form-control form-control-sm text-center\",\n      onChange: e => {\n        setTrabajadorLogin(trabajadores[e.target.value].trabajador);\n      },\n      autoFocus: true,\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), (trabajadores || []).map((rel, idx) => /*#__PURE__*/_jsxDEV(\"option\", {\n        value: idx,\n        children: rel.trabajador.fullName\n      }, rel.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), requiere_segundo_paso && /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      onChange: e => setPassword2(e.target.value),\n      className: \"form-control form-control-sm text-center mt-2\",\n      placeholder: \"{{ _t('navbar:password') }}\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 127,\n    columnNumber: 9\n  }, this);\n};\n\n_c3 = SegundoPaso;\n\nconst Footer = ({\n  t,\n  single_or_multi,\n  attempLogin,\n  loginTrabajadorSeleccionado\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal-footer\",\n    children: single_or_multi && single_or_multi == 'multi' ? /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: loginTrabajadorSeleccionado,\n      children: [/*#__PURE__*/_jsxDEV(FaUser, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 21\n      }, this), \" \", t('iniciarSesion')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: attempLogin,\n      children: [/*#__PURE__*/_jsxDEV(FaLock, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this), \" \", t('iniciarSesion')]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 9\n  }, this);\n};\n\n_c4 = Footer;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ModalLogin\");\n$RefreshReg$(_c2, \"Credenciales\");\n$RefreshReg$(_c3, \"SegundoPaso\");\n$RefreshReg$(_c4, \"Footer\");","map":{"version":3,"sources":["/home/frangb/Documentos/xolos/practicas/src/components/Template/ModalLogin.js"],"names":["React","useState","FaLock","FaUser","attemp","creaSesion","loginTrabajador","useTranslation","ModalLogin","ver_modal","setVerModalCh","setPermisosOk","t","username","setUsername","username_input","setUsernameInput","password","setPassword","password2","setPassword2","single_or_multi","setSingleOrMulti","trabajadores","setTrabajadores","requiere_segundo_paso","setRequiereSegundoPaso","trabajador_login","setTrabajadorLogin","attempLogin","then","data","singleOrMulti","token","loginTrabajadorSeleccionado","id","handleKeyUp","e","key","onEnteredHandle","focus","setRef","r","Credenciales","target","value","SegundoPaso","trabajador","map","rel","idx","fullName","Footer"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {useState} from \"react\";\nimport {FaLock, FaUser} from 'react-icons/fa';\nimport {attemp, creaSesion, loginTrabajador} from \"../../services/authService\";\nimport {useTranslation} from \"react-i18next\";\n\n\nexport const ModalLogin = ({ver_modal, setVerModalCh, setPermisosOk}) => {\n    //|------State------|//\n    const [t] = useTranslation(['navbar'])\n    const [username, setUsername] = useState('');\n    const [username_input, setUsernameInput] = useState(null);\n    const [password, setPassword] = useState('');\n    const [password2, setPassword2] = useState('');\n    const [single_or_multi, setSingleOrMulti] = useState('');\n    const [trabajadores, setTrabajadores] = useState([]);\n    const [requiere_segundo_paso, setRequiereSegundoPaso] = useState(false);\n    const [trabajador_login, setTrabajadorLogin] = useState({});\n\n    //|-------Actions-------|//\n    const attempLogin = () => {\n        if (username && password) {\n            attemp(username, password).then(data => {\n                setSingleOrMulti(data.singleOrMulti);\n                if (data.singleOrMulti === 'single') {\n                    creaSesion(data.token);\n                    // setPermisosOk(true);\n                    //setPermisosOk(false);\n                    //setVerModalCh(false);\n                } else {\n                    setTrabajadores(data.trabajadores);\n                    setRequiereSegundoPaso(data.requiere_segundo_paso);\n                }\n            });\n        }\n    };\n    const loginTrabajadorSeleccionado = () => {\n        loginTrabajador(username, trabajador_login.id, password2).then(data => {\n            creaSesion(data.token);\n            // setPermisosOk(true);\n            //setPermisosOk(false);\n            //setVerModalCh(false);\n        });\n    };\n    const handleKeyUp = (e) => {\n        if (e.key === 'Enter') {\n            attempLogin();\n        }\n    };\n    const onEnteredHandle = () => {\n        username_input.focus();\n    };\n    const setRef = (r) => setUsernameInput(r);\n\n    //|------Render-------|//\n    return (\n        <div className=\"modal fade\"\n             id=\"modalLogin\"\n        >\n            <div className=\"modal-dialog\">\n                <div className=\"modal-content\">\n                    <div className=\"modal-header\">\n                        <h4 className=\"modal-title text-center\">\n                            <FaLock/>\n                            {t('iniciarSesion')}\n                        </h4>\n                        <button type=\"button\" className=\"close\" data-dismiss=\"modal\">&times;</button>\n                    </div>\n                    <div className=\"modal-body\">\n                        <div className=\"d-flex flex-column py-1\">\n                            {single_or_multi != 'multi' &&\n                            <Credenciales\n                                t={t}\n                                setUsername={setUsername}\n                                setPassword={setPassword}\n                                handleKeyUp={handleKeyUp}\n                                setRef={setRef}\n                            />}\n                            {single_or_multi && single_or_multi == 'multi' &&\n                            <SegundoPaso\n                                t={t}\n                                trabajadores={trabajadores}\n                                setPassword2={setPassword2}\n                                setTrabajadorLogin={setTrabajadorLogin}\n                                requiere_segundo_paso={requiere_segundo_paso}/>}\n                        </div>\n                    </div>\n                    <Footer\n                        t={t}\n                        attempLogin={attempLogin}\n                        single_or_multi={single_or_multi}\n                        loginTrabajadorSeleccionado={loginTrabajadorSeleccionado}/>\n                </div>\n            </div>\n        </div>\n    );\n};\n\n//|------SubCompoenntes------|//\nconst Credenciales = ({t, setUsername, setPassword, handleKeyUp, setRef}) => {\n    return (\n        <div>\n            <div className=\"text-center\">{t('insIniciarSesion')}</div>\n            <div className=\"d-flex flex-column\">\n                <input className=\"form-control form-control-sm text-center mt-2\"\n                       id=\"username\"\n                       onKeyUp={handleKeyUp}\n                       autoFocus={true}\n                       ref={setRef}\n                       onChange={(e) => setUsername(e.target.value)}\n                       placeholder={t('username')}\n                />\n                <input type=\"password\"\n                       className=\"form-control form-control-sm text-center mt-2\"\n                       onKeyUp={handleKeyUp}\n                       onChange={(e) => setPassword(e.target.value)}\n                       placeholder={t('password')}\n                />\n            </div>\n        </div>\n    );\n};\n\n\nconst SegundoPaso = ({t, trabajadores, requiere_segundo_paso, setTrabajadorLogin, setPassword2}) => {\n    return (\n        <div className=\"d-flex flex-column px-3\">\n            <div className=\"text-center text-success\">{t('insIniciarSesionTrab')}</div>\n            <select className=\"form-control form-control-sm text-center\"\n                    onChange={(e) => {\n                        setTrabajadorLogin(trabajadores[e.target.value].trabajador)\n                    }}\n                    autoFocus={true}>\n                <option value=\"\"></option>\n                {(trabajadores || []).map((rel, idx) =>\n                    <option key={rel.id} value={idx}>{rel.trabajador.fullName}</option>\n                )}\n            </select>\n            {requiere_segundo_paso &&\n            <input type=\"password\"\n                   onChange={(e) => setPassword2(e.target.value)}\n                   className=\"form-control form-control-sm text-center mt-2\"\n                   placeholder=\"{{ _t('navbar:password') }}\"\n            />}\n        </div>\n    );\n};\n\nconst Footer = ({t, single_or_multi, attempLogin, loginTrabajadorSeleccionado}) => {\n    return (\n        <div className=\"modal-footer\">\n            {single_or_multi && single_or_multi == 'multi' ?\n                <button type=\"button\" className=\"btn btn-primary\"\n                        onClick={loginTrabajadorSeleccionado}>\n                    <FaUser/> {t('iniciarSesion')}\n                </button>\n                :\n                <button type=\"button\" className=\"btn btn-primary\"\n                        onClick={attempLogin}>\n                    <FaLock/> {t('iniciarSesion')}\n                </button>\n            }\n        </div>\n    );\n};\n"]},"metadata":{},"sourceType":"module"}